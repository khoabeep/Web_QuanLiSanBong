<app-user-header />

<div class="pitches-page">
  <div class="page-banner">
    <div class="container">
      <h1>Danh sách sân bóng</h1>
      <p>Tìm và đặt sân phù hợp với bạn</p>
    </div>
  </div>

  <div class="container">
    <div class="filters-section">
      <div class="search-box">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <input 
          type="text" 
          [(ngModel)]="searchQuery" 
          (input)="applyFilters()"
          placeholder="Tìm kiếm sân..."
          class="search-input"
        />
      </div>

      <div class="filters">
        <select [(ngModel)]="selectedType" (change)="applyFilters()" class="filter-select">
          <option value="">Tất cả loại sân</option>
          @for (type of pitchTypes; track type) {
            <option [value]="type">{{ type }}</option>
          }
        </select>

        <select [(ngModel)]="priceRange" (change)="applyFilters()" class="filter-select">
          <option value="all">Tất cả mức giá</option>
          <option value="low">Dưới 400.000đ</option>
          <option value="mid">400.000đ - 700.000đ</option>
          <option value="high">Trên 700.000đ</option>
        </select>

        <select [(ngModel)]="sortBy" (change)="applyFilters()" class="filter-select">
          <option value="name">Sắp xếp: Tên A-Z</option>
          <option value="price-asc">Giá: Thấp đến cao</option>
          <option value="price-desc">Giá: Cao đến thấp</option>
        </select>
      </div>
    </div>

    <div class="results-info">
      <p>Tìm thấy <strong>{{ filteredPitches.length }}</strong> sân bóng</p>
    </div>

    @if (filteredPitches.length === 0) {
      <div class="empty-state">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <h3>Không tìm thấy sân nào</h3>
        <p>Thử thay đổi bộ lọc hoặc từ khóa tìm kiếm</p>
      </div>
    } @else {
      <div class="pitches-grid">
        @for (pitch of filteredPitches; track pitch.id) {
          <div class="pitch-card">
            <div class="pitch-image">
              <img [src]="pitch.image" [alt]="pitch.name" />
              <div class="pitch-overlay">
                <a [routerLink]="['/booking']" [queryParams]="{pitchId: pitch.id}" class="btn-quick-book">
                  Đặt ngay
                </a>
              </div>
            </div>
            <div class="pitch-content">
              <div class="pitch-header">
                <h3 class="pitch-name">{{ pitch.name }}</h3>
                <span class="pitch-type-badge">{{ pitch.type }}</span>
              </div>
              <p class="pitch-description">{{ pitch.description }}</p>
              
              <div class="pitch-features">
                <div class="feature-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v20M2 12h20"/>
                  </svg>
                  <span>Cỏ nhân tạo</span>
                </div>
                <div class="feature-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                  </svg>
                  <span>Có mái che</span>
                </div>
                <div class="feature-item">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"/>
                    <line x1="12" y1="1" x2="12" y2="3"/>
                    <line x1="12" y1="21" x2="12" y2="23"/>
                  </svg>
                  <span>Chiếu sáng</span>
                </div>
              </div>

              <div class="pitch-footer">
                <div class="pitch-price">
                  <span class="price-label">Giá thuê</span>
                  <span class="price-value">{{ formatCurrency(pitch.price) }}/h</span>
                </div>
                <a [routerLink]="['/booking']" [queryParams]="{pitchId: pitch.id}" class="btn-book">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 2v4M8 2v4M3 10h18"/>
                    <rect x="3" y="4" width="18" height="18" rx="2"/>
                  </svg>
                  Đặt sân
                </a>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>

<app-user-footer />
